(()=>{var e,t={6562:(e,t,n)=>{n(3358),n(8563),n(6313);var o=n(7255),r=n(4592),a=n(8149);!async function(){try{var e=await r.checkSessionCookie();if(e){var t=e.color||"#000000",n=[{element:"div",className:"centeredDialog",children:[{element:"div",style:{display:"flex"},children:[{element:"img",style:{outline:"none",borderRadius:"64px",borderStyle:"solid",borderWidth:"3px",borderColor:"#7d7d7d",backgroundColor:"#969696",imageRendering:"pixelated",top:"0px",width:"64px",height:"64px"},gid:"profilePicture_account"},{element:"div",style:{display:"flex",flexDirection:"column"},children:[{element:"input",style:{alignContent:"center",fontSize:"30px",fontWeight:"bold",color:t,border:"none",background:"none"},gid:"displayNameInput",value:e.displayName},{element:"span",style:{alignContent:"center",fontSize:"16px",color:t},gid:"usernameSpan",textContent:e.username}]},{element:"div",style:{width:"10px"}},{element:"div",style:{alignContent:"center"},title:"Click this to change your usernames color, appears in chat as well!",children:[{element:"input",type:"color",value:t,gid:"username_color_input"}]}]},{element:"hr"},{element:"span",className:"headerText",textContent:"Your Random Rants + account"},{element:"br"},{element:"div",className:"button",gid:"changeDisplayNameButton",children:[{element:"img",src:"images/text.svg",style:{height:"17px"}},{element:"span",textContent:"Change display name"}]},{element:"div",style:{display:"flex"},children:[{element:"div",className:"button",gid:"uploadPFP",style:{flexGrow:"1"},children:[{element:"img",src:"images/profile.svg",style:{height:"17px"}},{element:"span",textContent:"Upload profile picture"}]},{element:"div",className:"button",style:{width:"fit-content"},gid:"resetPFP",children:[{element:"span",textContent:"Reset"}]}]},{element:"div",className:"button",eventListeners:[{event:"click",func:function(){o.getGPId("username_color_input").click()}}],children:[{element:"img",src:"images/brush.svg",style:{height:"17px"}},{element:"span",textContent:"Change username color"}]},{element:"div",className:"button",gid:"changePasswordButton",children:[{element:"img",src:"images/key.svg",style:{height:"17px"}},{element:"span",textContent:"Change password"}]},{element:"div",className:"button",gid:"signOutButton",children:[{element:"img",src:"images/signout.svg",style:{height:"17px"}},{element:"span",textContent:"Sign out"}]}]}],i=o.createElementsFromJSON(n);o.appendElements(o.body,i);var s=o.getGPId("profilePicture_account"),l=o.getGPId("username_color_input"),c=o.getGPId("usernameSpan"),d=o.getGPId("changeDisplayNameButton"),u=o.getGPId("displayNameInput"),m=o.getGPId("changePasswordButton");async function p(t){var n=r.getProfilePictureURL(e.username);try{for(var o=0;o<3;o++)await fetch(n,{cache:"reload",mode:"no-cors"})}catch(e){}s.src=t||n}p(),o.getGPId("signOutButton").onclick=function(){r.logoutOfAccount(),window.location.href="/"},o.getGPId("uploadPFP").onclick=function(){var e=document.createElement("input");e.accept=".png, .jpeg, .bmp, .jpg, .ico, .webm",e.type="file",e.onchange=function(){var t=e.files[0];if(t){var n=new FileReader;n.onload=async function(){try{try{var e=await(t=n.result,new Promise(((e,n)=>{const o=document.createElement("img");o.src=t,o.onload=function(){try{const t=96,n=document.createElement("canvas"),r=n.getContext("2d");let a,i;const s=o.width/o.height;s>1?(a=t,i=t/s):(i=t,a=t*s),n.width=t,n.height=t,r.clearRect(0,0,n.width,n.height);const l=(t-a)/2,c=(t-i)/2;r.drawImage(o,l,c,a,i);const d=n.toDataURL("image/webp",.7);n.width=1,n.height=1,n.remove(),e(d)}catch(e){n("Got strange error when trying to resize image: "+e)}},o.onerror=function(){n("Unable to load image format, browser may not support this file format. (Stop trying to break the system, its not helpful.)")}})))}catch(e){return void a.alert("Error compressing image: "+e)}await fetch(r.getServerURL()+"/account/picture/",{method:"POST",body:e.split(",").pop()}),p(e)}catch(e){a.alert(`Error uploading profile picture, your profile is not uploaded. ${e}`)}var t},n.readAsDataURL(t)}},e.click()},o.getGPId("resetPFP").onclick=async function(){try{await fetch(r.getServerURL()+"/account/picture/",{method:"POST",body:""}),p()}catch(e){a.alert("Error deleting profile picture.")}},l.onchange=async function(){t=l.value,u.style.color=t,c.style.color=t,await fetch(r.getServerURL()+"/account/setcolor/",{method:"POST",body:JSON.stringify({color:l.value})})},d.onclick=async function(){u.focus()},u.style.cursor="pointer",u.onfocus=async function(){u.style.cursor="auto"},u.onblur=async function(){u.style.cursor="pointer"},u.onchange=async function(){u.disabled=!0;var e=u.value;if(!(await fetch(r.getServerURL()+"/account/displayname/",{method:"POST",body:JSON.stringify({displayName:e})})).ok)return a.alert("Unable to set the display name, this display name may be too long."),void(u.disabled=!1);u.value=e,u.disabled=!1},m.onclick=async function(){if(m.disabled=!0,await a.confirm("Are you sure you want to change your password?\nYou MUST remember this password, otherwise you're locked out of this account for good!")){var e=await a.passwordPrompt("Input your new password.\nMust be completely unique from your other passwords. (Including ones used for other sites)");if(e){if(!(await fetch(r.getServerURL()+"/account/passwordchange/",{method:"POST",body:JSON.stringify({newPassword:e})})).ok)return void a.alert("Unable to set the new password.");a.alert("Changed password successfully!\nAll other devcices are signed out until you change the password back.")}else a.alert("Password change canceled.")}m.disabled=!1}}else n=[{element:"div",className:"centeredDialog",children:[{element:"span",className:"headerText",textContent:"Error with your account"},{element:"span",textContent:"You are not logged in, or you where logged out of your account. If you get this error, someone might have changed your user information. This can also happen if you change your user info on another device."}]}],i=o.createElementsFromJSON(n),o.appendElements(o.body,i)}catch(g){a.alert(g)}}()}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.m=t,e=[],o.O=(t,n,r,a)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,r,a]=e[d],s=!0,l=0;l<n.length;l++)(!1&a||i>=a)&&Object.keys(o.O).every((e=>o.O[e](n[l])))?n.splice(l--,1):(s=!1,a<i&&(i=a));if(s){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,r,a]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={930:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[i,s,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(l)var d=l(o)}for(t&&t(n);c<i.length;c++)a=i[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},n=self.webpackChunkrandomrants_plus=self.webpackChunkrandomrants_plus||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=o.O(void 0,[804],(()=>o(6562)));r=o.O(r)})();